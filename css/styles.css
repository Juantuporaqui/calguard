/* ═══════════════════════════════════════════════════
   CalGuard - Policía Científica CNP
   Cuadrante + Bitácora Operativa
   Mobile-first, dark mode, accessible, print-ready
   ═══════════════════════════════════════════════════ */

/* ─── CSS Custom Properties ─── */
:root {
  /* Colors - Light mode */
  --bg-primary: #eef1f5;
  --bg-secondary: #ffffff;
  --bg-tertiary: #e4e9ef;
  --bg-nav: #111827;
  --text-primary: #111827;
  --text-secondary: #4b5563;
  --text-muted: #9ca3af;
  --border-color: rgba(0,0,0,0.08);
  --accent: #3b82f6;
  --accent-hover: #2563eb;
  --accent-light: #eff6ff;

  /* Semantic colors - Event types (user cuadrante original colors) */
  --guardia: #dc2626;
  --guardia-bg: #fecaca;
  --guardia-border: #dc2626;
  --guardia-plan: #ea580c;
  --guardia-plan-bg: #fed7aa;
  --guardia-plan-border: #ea580c;
  /* Libres = amarillo */
  --libre: #ca8a04;
  --libre-bg: #fef9c3;
  --libre-border: #eab308;
  /* Vacaciones = naranja */
  --vacaciones: #ea580c;
  --vacaciones-bg: #ffedd5;
  --vacaciones-border: #f97316;
  /* Asuntos propios = morado */
  --ap: #7c3aed;
  --ap-bg: #ede9fe;
  --ap-border: #8b5cf6;
  --formacion: #0891b2;
  --formacion-bg: #cffafe;
  --formacion-border: #06b6d4;
  /* Juicios = azul */
  --juicio: #2563eb;
  --juicio-bg: #dbeafe;
  --juicio-border: #3b82f6;
  --turno-m: #f59e0b;
  --turno-m-bg: #fef3c7;
  --turno-m-border: #f59e0b;
  --turno-t: #e65100;
  --turno-t-bg: #ffccbc;
  --turno-t-border: #e65100;
  /* Baja / Asuntos familiares = azul clarito */
  --baja: #0ea5e9;
  --baja-bg: #e0f2fe;
  --baja-border: #38bdf8;
  /* Fines de semana = verde */
  --weekend-bg: #dcfce7;
  --weekend-text: #16a34a;
  --today-ring: #3b82f6;
  --selected-bg: #dbeafe;
  --danger: #dc2626;
  --success: #16a34a;
  --warn: #d97706;

  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;

  /* Typography */
  --font: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --font-mono: ui-monospace, 'SF Mono', monospace;
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;

  /* Radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-full: 9999px;

  /* Shadows - deeper, more layered */
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg: 0 12px 40px rgba(0,0,0,0.12), 0 4px 12px rgba(0,0,0,0.06);
  --shadow-xl: 0 20px 60px rgba(0,0,0,0.15), 0 8px 20px rgba(0,0,0,0.08);
  --shadow-glow: 0 0 20px rgba(59,130,246,0.15);
  --shadow-card: 0 2px 8px rgba(0,0,0,0.06), 0 0 1px rgba(0,0,0,0.1);
  --shadow-card-hover: 0 8px 24px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.06);

  /* Glass effect */
  --glass-bg: rgba(255,255,255,0.7);
  --glass-border: rgba(255,255,255,0.5);
  --glass-blur: blur(12px);
}

/* ─── Dark Mode ─── */
html.dark {
  --bg-primary: #0b1121;
  --bg-secondary: #151e2e;
  --bg-tertiary: #1e293b;
  --bg-nav: #0b1121;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;
  --border-color: rgba(255,255,255,0.06);
  --accent: #60a5fa;
  --accent-hover: #93bbfd;
  --accent-light: rgba(59,130,246,0.15);
  --weekend-bg: rgba(22,163,74,0.12);
  --weekend-text: #4ade80;
  --selected-bg: rgba(59,130,246,0.2);
  --guardia-bg: rgba(220, 38, 38, 0.25);
  --guardia-border: #f87171;
  --guardia-plan-bg: rgba(234, 88, 12, 0.25);
  --guardia-plan-border: #fb923c;
  --libre-bg: rgba(234, 179, 8, 0.2);
  --libre-border: #facc15;
  --libre: #eab308;
  --vacaciones-bg: rgba(249, 115, 22, 0.2);
  --vacaciones-border: #fb923c;
  --vacaciones: #f97316;
  --ap-bg: rgba(124, 58, 237, 0.22);
  --ap-border: #a78bfa;
  --formacion-bg: rgba(8, 145, 178, 0.22);
  --formacion-border: #22d3ee;
  --juicio-bg: rgba(37, 99, 235, 0.22);
  --juicio-border: #60a5fa;
  --juicio: #60a5fa;
  --turno-m-bg: rgba(245, 158, 11, 0.22);
  --turno-m-border: #fbbf24;
  --turno-t-bg: rgba(230, 81, 0, 0.22);
  --turno-t-border: #ff7043;
  --baja-bg: rgba(14, 165, 233, 0.2);
  --baja-border: #38bdf8;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.2);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
  --shadow-lg: 0 12px 40px rgba(0,0,0,0.4);
  --shadow-card: 0 2px 8px rgba(0,0,0,0.2), 0 0 1px rgba(255,255,255,0.05);
  --shadow-card-hover: 0 8px 24px rgba(0,0,0,0.35);
  --glass-bg: rgba(21,30,46,0.7);
  --glass-border: rgba(255,255,255,0.06);
}

/* ─── Animations ─── */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInScale {
  from { opacity: 0; transform: scale(0.96); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes slideDown {
  from { opacity: 0; transform: translateY(-12px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes pulse-ring {
  0% { box-shadow: inset 0 0 0 2px var(--today-ring); }
  50% { box-shadow: inset 0 0 0 3px var(--today-ring), 0 0 12px rgba(59,130,246,0.3); }
  100% { box-shadow: inset 0 0 0 2px var(--today-ring); }
}
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ─── Reset ─── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; -webkit-text-size-adjust: 100%; scroll-behavior: smooth; }
body {
  font-family: var(--font);
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.5;
  min-height: 100vh;
  min-height: 100dvh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
button { cursor: pointer; font-family: inherit; }
input, select, textarea { font-family: inherit; font-size: var(--text-base); }

/* ─── Focus visible ─── */
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* ─── App container ─── */
#app {
  max-width: 1200px;
  margin: 0 auto;
  padding-bottom: 72px; /* nav height */
}

/* ─── Loading ─── */
.loading-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  gap: var(--space-md);
  color: var(--text-secondary);
}

.spinner {
  width: 40px; height: 40px;
  border: 3px solid var(--border-color);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* ─── Navigation Bar ─── */
.nav-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  background: rgba(17, 24, 39, 0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-top: 1px solid rgba(255,255,255,0.08);
  z-index: 100;
  padding: env(safe-area-inset-bottom, 0);
  box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
}

.nav-tab {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 8px 4px 10px;
  background: none;
  border: none;
  color: rgba(255,255,255,0.45);
  font-size: var(--text-xs);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.nav-tab.active {
  color: #fff;
}
.nav-tab.active::after {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 3px;
  background: var(--accent);
  border-radius: 0 0 4px 4px;
}
.nav-tab:hover { color: rgba(255,255,255,0.85); }
.nav-icon { font-size: 1.25rem; line-height: 1; transition: transform 0.2s; }
.nav-tab:hover .nav-icon { transform: translateY(-1px); }
.nav-label { font-size: var(--text-xs); white-space: nowrap; }

/* ─── Update Banner ─── */
.update-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: var(--accent);
  color: #fff;
  padding: var(--space-sm) var(--space-md);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  font-size: var(--text-sm);
  z-index: 200;
}

.update-banner button {
  background: rgba(255,255,255,0.2);
  border: 1px solid rgba(255,255,255,0.4);
  color: #fff;
  padding: 4px 12px;
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
}

/* ─── Buttons ─── */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: 10px 20px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-weight: 600;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  box-shadow: var(--shadow-sm);
  position: relative;
  overflow: hidden;
}

.btn:hover { background: var(--bg-tertiary); transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn:active { transform: translateY(0); box-shadow: var(--shadow-sm); }
.btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent-hover)); color: #fff; border-color: transparent; box-shadow: 0 2px 8px rgba(59,130,246,0.3); }
.btn-primary:hover { box-shadow: 0 4px 16px rgba(59,130,246,0.4); background: linear-gradient(135deg, var(--accent-hover), var(--accent)); }
.btn-secondary { background: var(--bg-tertiary); }
.btn-danger { background: linear-gradient(135deg, #dc2626, #b91c1c); color: #fff; border-color: transparent; box-shadow: 0 2px 8px rgba(220,38,38,0.25); }
.btn-danger:hover { box-shadow: 0 4px 16px rgba(220,38,38,0.35); }
.btn-success { background: linear-gradient(135deg, #16a34a, #15803d); color: #fff; border-color: transparent; box-shadow: 0 2px 8px rgba(22,163,74,0.25); }
.btn-sm { padding: 6px 14px; font-size: var(--text-xs); border-radius: var(--radius-sm); }
.btn-icon { padding: 8px 12px; font-size: var(--text-lg); border: none; background: none; color: var(--text-primary); box-shadow: none; }
.btn-icon:hover { background: var(--bg-tertiary); border-radius: var(--radius-md); box-shadow: none; }

/* ─── Cards ─── */
.card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  box-shadow: var(--shadow-card);
  transition: box-shadow 0.25s, transform 0.25s;
}
.card:hover {
  box-shadow: var(--shadow-card-hover);
}

/* ═══════════════════════════════════════════════════
   DASHBOARD
   ═══════════════════════════════════════════════════ */
.dashboard {
  padding: var(--space-md);
  animation: fadeIn 0.35s ease-out;
}

.dashboard-header {
  text-align: center;
  padding: var(--space-lg) var(--space-md);
}

.dashboard-header h1 {
  font-size: var(--text-2xl);
  font-weight: 800;
  letter-spacing: -0.03em;
  background: linear-gradient(135deg, var(--text-primary), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.subtitle {
  color: var(--text-secondary);
  font-size: var(--text-sm);
  margin-top: 2px;
}

.today-date {
  color: var(--accent);
  font-weight: 600;
  margin-top: var(--space-xs);
}

/* Today status */
.today-status {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: var(--shadow-card);
  animation: fadeIn 0.3s ease-out 0.1s both;
}

.today-status h3 { font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-xs); }

.tag-list { display: flex; flex-wrap: wrap; gap: var(--space-xs); }

.tag {
  display: inline-block;
  padding: 2px 10px;
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: 700;
  letter-spacing: 0.01em;
  box-shadow: 0 1px 2px rgba(0,0,0,0.06);
}

.tag-guardia_real { background: var(--guardia-bg); color: var(--guardia); }
.tag-guardia_plan { background: var(--guardia-plan-bg); color: var(--guardia-plan); }
.tag-libre { background: var(--libre-bg); color: var(--libre); }
.tag-vacaciones { background: var(--vacaciones-bg); color: var(--vacaciones); }
.tag-ap { background: var(--ap-bg); color: var(--ap); }
.tag-turno_m { background: var(--turno-m-bg); color: var(--turno-m); }
.tag-turno_t { background: var(--turno-t-bg); color: var(--turno-t); }
.tag-turno_n { background: var(--bg-tertiary); color: var(--text-primary); }
.tag-formacion { background: var(--formacion-bg); color: var(--formacion); }
.tag-juicio { background: var(--juicio-bg); color: var(--juicio); }
.tag-baja { background: var(--baja-bg); color: var(--baja); }
.tag-otro { background: var(--bg-tertiary); color: var(--text-secondary); }

/* Alerts */
.alerts-section { margin-bottom: var(--space-md); }

.alert {
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  margin-bottom: var(--space-xs);
}

.alert-warn { background: rgba(217, 119, 6, 0.1); color: var(--warn); border-left: 3px solid var(--warn); }
.alert-info { background: var(--accent-light); color: var(--accent); border-left: 3px solid var(--accent); }

/* Counters grid */
.counters-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.counters-grid.compact { grid-template-columns: repeat(4, 1fr); }

.counter-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-xs);
  text-align: center;
  box-shadow: var(--shadow-card);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  animation: fadeIn 0.35s ease-out both;
}
.counter-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-card-hover);
}

.counter-value {
  display: block;
  font-size: var(--text-xl);
  font-weight: 800;
  color: var(--accent);
}

.counter-label {
  display: block;
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin-top: 2px;
  font-weight: 500;
}

/* Week overview */
.week-overview {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: var(--shadow-card);
  animation: fadeIn 0.4s ease-out 0.15s both;
}

.week-overview h3 { font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-sm); }

.week-row {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--space-xs);
}

.week-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-xs);
  border-radius: var(--radius-sm);
  min-height: 56px;
  font-size: var(--text-xs);
}

.week-day.today { animation: pulse-ring 2s ease-in-out infinite; border-radius: var(--radius-md); }
.week-day.weekend { background: var(--weekend-bg); color: var(--weekend-text); }
.week-day.has-guardia { background: var(--guardia-bg); }
.week-day.has-plan { background: var(--guardia-plan-bg); }
.week-day.has-vacaciones { background: var(--vacaciones-bg); }
.week-day.has-libre { background: var(--libre-bg); }
.week-day.has-ap { background: var(--ap-bg); }
.week-day-name { font-weight: 600; color: var(--text-muted); }
.week-day-num { font-weight: 700; font-size: var(--text-sm); }
.week-tag { font-size: 0.65rem; font-weight: 700; margin-top: 1px; }

/* Next guard card */
.next-guard-card {
  background: var(--guardia-plan-bg);
  border: 1px solid rgba(249, 115, 22, 0.2);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: 0 4px 16px rgba(234, 88, 12, 0.12);
  animation: fadeIn 0.4s ease-out 0.2s both;
}

.next-guard-card h3 { font-size: var(--text-sm); color: var(--guardia-plan); }
.next-guard-card p { font-weight: 600; }

/* Guard summary */
.guard-summary {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: var(--shadow-card);
  animation: fadeIn 0.4s ease-out 0.25s both;
}

.guard-summary h3 { font-size: var(--text-sm); color: var(--text-secondary); margin-bottom: var(--space-sm); }

.guard-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-xs) 0;
  font-size: var(--text-sm);
}

.guard-balance { color: var(--text-muted); font-size: var(--text-xs); }

.guard-progress {
  flex: 1;
  height: 6px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.guard-progress-bar {
  height: 100%;
  background: var(--accent);
  border-radius: var(--radius-full);
  transition: width 0.3s;
}

/* Quick actions */
.quick-actions {
  display: flex;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}

.quick-actions .btn { flex: 1; }

/* ═══════════════════════════════════════════════════
   CALENDAR
   ═══════════════════════════════════════════════════ */
.calendar-view {
  padding: var(--space-md);
  animation: fadeIn 0.3s ease-out;
}

.calendar-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-sm);
}

.calendar-title-group {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.calendar-title {
  font-size: var(--text-lg);
  font-weight: 800;
  min-width: 160px;
  text-align: center;
  letter-spacing: -0.02em;
}

.calendar-actions {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-md);
  justify-content: center;
}

/* Calendar grid */
.calendar-grid-container {
  margin-bottom: var(--space-md);
  animation: fadeInScale 0.4s ease-out;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  background: transparent;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.weekday {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-nav);
  color: rgba(255,255,255,0.8);
  font-weight: 700;
  font-size: var(--text-xs);
  padding: var(--space-xs);
  height: 34px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.weekday.compact { height: 24px; font-size: 0.65rem; }

.day {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  min-height: 52px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  user-select: none;
}

.day:hover { background: var(--accent-light); transform: scale(1.08); box-shadow: var(--shadow-md); z-index: 2; border-radius: var(--radius-sm); }
.day.empty { cursor: default; background: var(--bg-tertiary); opacity: 0.5; }
.day.empty:hover { background: var(--bg-tertiary); transform: none; box-shadow: none; }
.day.compact { min-height: 32px; }
.day.weekend { background: var(--weekend-bg); }
.day.weekend .day-num { color: var(--weekend-text); }
.day.today { animation: pulse-ring 2.5s ease-in-out infinite; z-index: 1; }

/* Day types - full cell background color */
.day.guardia { background: var(--guardia-bg); border-left: 5px solid var(--guardia-border); }
.day.guardia .day-num { color: var(--guardia); font-weight: 800; }
.day.proxima-guardia { background: var(--guardia-plan-bg); border-left: 5px solid var(--guardia-plan-border); border-right: 1px dashed var(--guardia-plan); }
.day.proxima-guardia .day-num { color: var(--guardia-plan); }
.day.libre { background: var(--libre-bg); border-left: 5px solid var(--libre-border); }
.day.libre .day-num { color: var(--libre); }
.day.vacaciones { background: var(--vacaciones-bg); border-left: 5px solid var(--vacaciones-border); }
.day.vacaciones .day-num { color: var(--vacaciones); }
.day.asunto { background: var(--ap-bg); border-left: 5px solid var(--ap-border); }
.day.asunto .day-num { color: var(--ap); }
.day.formacion { background: var(--formacion-bg); border-left: 5px solid var(--formacion-border); }
.day.formacion .day-num { color: var(--formacion); }
.day.juicio { background: var(--juicio-bg); border-left: 5px solid var(--juicio-border); }
.day.juicio .day-num { color: var(--juicio); }

/* Shift-only day types */
.day.turno-m { background: var(--turno-m-bg); border-left: 5px solid var(--turno-m-border); }
.day.turno-m .day-num { color: var(--turno-m); }
.day.turno-t { background: var(--turno-t-bg); border-left: 5px solid var(--turno-t-border); }
.day.turno-t .day-num { color: var(--turno-t); }

/* ─── Diagonal Splits (bandera style) ─── */
/* Guardia + Libre/AP/Shifts/Formacion/Juicio */
.day.guardia.libre {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--libre-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
.day.guardia.asunto {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--ap-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
.day.guardia.turno-m {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
.day.guardia.turno-t {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
.day.guardia.formacion {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--formacion-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
.day.guardia.juicio {
  background: linear-gradient(135deg, var(--guardia-bg) 50%, var(--juicio-bg) 50%);
  border-left: 5px solid var(--guardia-border);
}
/* Guardia Plan + Libre/AP/Shifts */
.day.proxima-guardia.libre {
  background: linear-gradient(135deg, var(--guardia-plan-bg) 50%, var(--libre-bg) 50%);
  border-left: 5px solid var(--guardia-plan-border);
}
.day.proxima-guardia.asunto {
  background: linear-gradient(135deg, var(--guardia-plan-bg) 50%, var(--ap-bg) 50%);
  border-left: 5px solid var(--guardia-plan-border);
}
.day.proxima-guardia.turno-m {
  background: linear-gradient(135deg, var(--guardia-plan-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--guardia-plan-border);
}
.day.proxima-guardia.turno-t {
  background: linear-gradient(135deg, var(--guardia-plan-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--guardia-plan-border);
}
/* Libre + Shifts */
.day.libre.turno-m {
  background: linear-gradient(135deg, var(--libre-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--libre-border);
}
.day.libre.turno-t {
  background: linear-gradient(135deg, var(--libre-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--libre-border);
}
/* Vacaciones + Shifts */
.day.vacaciones.turno-m {
  background: linear-gradient(135deg, var(--vacaciones-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--vacaciones-border);
}
.day.vacaciones.turno-t {
  background: linear-gradient(135deg, var(--vacaciones-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--vacaciones-border);
}
/* Asunto + Shifts */
.day.asunto.turno-m {
  background: linear-gradient(135deg, var(--ap-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--ap-border);
}
.day.asunto.turno-t {
  background: linear-gradient(135deg, var(--ap-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--ap-border);
}
/* Formacion + Shifts */
.day.formacion.turno-m {
  background: linear-gradient(135deg, var(--formacion-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--formacion-border);
}
.day.formacion.turno-t {
  background: linear-gradient(135deg, var(--formacion-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--formacion-border);
}
/* Juicio + Shifts */
.day.juicio.turno-m {
  background: linear-gradient(135deg, var(--juicio-bg) 50%, var(--turno-m-bg) 50%);
  border-left: 5px solid var(--juicio-border);
}
.day.juicio.turno-t {
  background: linear-gradient(135deg, var(--juicio-bg) 50%, var(--turno-t-bg) 50%);
  border-left: 5px solid var(--juicio-border);
}

/* Baja / Asuntos familiares day type */
.day.baja { background: var(--baja-bg); border-left: 5px solid var(--baja-border); }
.day.baja .day-num { color: var(--baja); }

.day-num { font-weight: 700; font-size: var(--text-sm); line-height: 1; }
.day.compact .day-num { font-size: var(--text-xs); }

/* Day labels */
.day-label {
  position: absolute;
  font-size: 0.6rem;
  font-weight: 700;
  line-height: 1;
}

.label-m { top: 2px; left: 3px; color: var(--accent); }
.label-t { top: 2px; right: 3px; color: var(--guardia-plan); }
.label-n { bottom: 2px; left: 3px; color: var(--text-muted); }
.label-otro { bottom: 2px; right: 2px; color: var(--text-muted); font-size: 0.55rem; max-width: 100%; overflow: hidden; text-overflow: ellipsis; }

/* Multi-select */
.day.multi-selected {
  box-shadow: inset 0 0 0 2px var(--success);
  background: var(--libre-bg);
}

/* Month blocks (full year view) */
.year-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: var(--space-md);
}

.month-block { margin-bottom: var(--space-md); }
.month-compact .month-name {
  text-align: center;
  font-weight: 700;
  font-size: var(--text-sm);
  padding: var(--space-xs);
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm) var(--radius-sm) 0 0;
}

/* Range/multi-select mode banners */
.range-banner,
.multi-select-mode .range-banner {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--accent-light);
  color: var(--accent);
  border-radius: var(--radius-md);
  margin-bottom: var(--space-md);
  font-weight: 600;
  font-size: var(--text-sm);
}

/* ═══════════════════════════════════════════════════
   CONTEXT MENU
   ═══════════════════════════════════════════════════ */
.ctx-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  z-index: 500;
  animation: fadeIn 0.15s ease-out;
}

.ctx-menu {
  position: fixed;
  z-index: 510;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  padding: var(--space-sm);
  width: 270px;
  max-height: 80vh;
  overflow-y: auto;
  animation: fadeInScale 0.2s ease-out;
}

.ctx-header {
  font-weight: 700;
  font-size: var(--text-sm);
  color: var(--text-secondary);
  padding: var(--space-xs) var(--space-sm);
  border-bottom: 1px solid var(--border-color);
  margin-bottom: var(--space-xs);
}

.ctx-section {
  margin-bottom: var(--space-xs);
}

.ctx-section-title {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: var(--space-xs) var(--space-sm);
}

.ctx-btn {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  padding: 8px var(--space-sm);
  border: none;
  background: none;
  color: var(--text-primary);
  font-size: var(--text-sm);
  border-radius: var(--radius-sm);
  transition: background 0.1s;
  text-align: left;
}

.ctx-btn:hover { background: var(--bg-tertiary); }

.ctx-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 700;
  color: #fff;
}

.guardia-icon { background: var(--guardia); }
.plan-icon { background: var(--guardia-plan); }
.libre-icon { background: var(--libre); }
.ap-icon { background: var(--ap); }
.vac-icon { background: var(--vacaciones); }
.turno-icon { background: var(--text-muted); }
.form-icon { background: var(--formacion); }
.juicio-icon { background: var(--juicio); }
.baja-icon { background: var(--baja); }
.otros-icon { background: var(--text-secondary); }

.ctx-danger-section { border-top: 1px solid var(--border-color); padding-top: var(--space-xs); }
.ctx-danger { color: var(--danger); }
.ctx-danger:hover { background: rgba(220, 38, 38, 0.08); }

/* ═══════════════════════════════════════════════════
   MODALS
   ═══════════════════════════════════════════════════ */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 600;
  padding: var(--space-md);
  animation: fadeIn 0.15s ease-out;
}

.modal-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-xl);
  padding: var(--space-lg);
  width: 100%;
  max-width: 420px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-xl);
  animation: slideUp 0.25s ease-out;
  border: 1px solid var(--border-color);
}

.modal-large { max-width: 540px; }

.modal-card h3 {
  font-size: var(--text-lg);
  margin-bottom: var(--space-md);
}

.modal-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  margin-top: var(--space-md);
}

.form-grid {
  display: grid;
  gap: var(--space-sm);
}

.form-grid label, .modal-card > label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: var(--text-sm);
  color: var(--text-secondary);
}

.form-grid input, .form-grid select,
.modal-card input, .modal-card select, .modal-card textarea {
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: var(--text-sm);
}

.form-grid input:focus, .modal-card input:focus,
.form-grid select:focus, .modal-card select:focus,
.modal-card textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-warning {
  background: rgba(217, 119, 6, 0.1);
  color: var(--warn);
  padding: var(--space-sm);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  margin-bottom: var(--space-md);
  border-left: 3px solid var(--warn);
}

.form-section { margin: var(--space-sm) 0; }
.form-section > label:first-child { font-weight: 600; font-size: var(--text-sm); color: var(--text-secondary); }

.tag-selector {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-top: var(--space-xs);
}

.tag-checkbox {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: var(--text-xs);
  background: var(--bg-tertiary);
  padding: 4px 8px;
  border-radius: var(--radius-full);
  cursor: pointer;
}

.sensitivity-toggle {
  display: flex;
  flex-direction: row !important;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--text-sm);
  margin-top: var(--space-sm);
  color: var(--warn);
}

/* ═══════════════════════════════════════════════════
   SHARE POPUP
   ═══════════════════════════════════════════════════ */
.share-popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 700;
  padding: var(--space-md);
}

.share-popup-content {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  width: 100%;
  max-width: 400px;
}

.share-popup-content h3 { margin-bottom: var(--space-sm); }

.share-popup-content textarea {
  width: 100%;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  padding: var(--space-sm);
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  background: var(--bg-primary);
  color: var(--text-primary);
  resize: vertical;
}

.share-actions {
  display: flex;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}

/* ═══════════════════════════════════════════════════
   REGISTRY (Bitácora)
   ═══════════════════════════════════════════════════ */
.registry-view { padding: var(--space-md); animation: fadeIn 0.3s ease-out; }

.registry-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-md);
}

.registry-header h2 { font-size: var(--text-lg); }

.registry-filters {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.registry-filters select {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: var(--text-sm);
}

.registry-summary {
  display: flex;
  gap: var(--space-md);
  color: var(--text-muted);
  font-size: var(--text-sm);
  margin-bottom: var(--space-md);
}

.service-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-md);
  margin-bottom: var(--space-sm);
  box-shadow: var(--shadow-card);
  transition: transform 0.2s, box-shadow 0.2s;
}
.service-card:hover { transform: translateY(-1px); box-shadow: var(--shadow-card-hover); }

.service-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-xs);
}

.service-type { font-weight: 700; font-size: var(--text-sm); }
.service-date { color: var(--text-muted); font-size: var(--text-xs); }

.service-details {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  font-size: var(--text-xs);
  color: var(--text-secondary);
}

.service-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  margin-top: var(--space-xs);
}

.service-tags .tag {
  background: var(--bg-tertiary);
  font-size: 0.65rem;
}

.service-notes {
  font-size: var(--text-xs);
  color: var(--text-muted);
  margin-top: var(--space-xs);
  padding-top: var(--space-xs);
  border-top: 1px solid var(--border-color);
}

.sensitivity-badge {
  display: inline-block;
  padding: 1px 6px;
  background: rgba(217, 119, 6, 0.15);
  color: var(--warn);
  font-size: 0.6rem;
  font-weight: 700;
  border-radius: var(--radius-full);
  margin-top: var(--space-xs);
}

.service-delete { margin-top: var(--space-sm); }

.empty-state {
  text-align: center;
  color: var(--text-muted);
  padding: var(--space-xl);
  font-size: var(--text-sm);
}

/* ═══════════════════════════════════════════════════
   STATISTICS
   ═══════════════════════════════════════════════════ */
.stats-view { padding: var(--space-md); animation: fadeIn 0.3s ease-out; }
.stats-view h2 { font-size: var(--text-lg); margin-bottom: var(--space-md); }

.stats-period-selector {
  display: flex;
  gap: var(--space-xs);
  margin-bottom: var(--space-sm);
}

.stats-period-selector .btn.active {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

.stats-range {
  color: var(--text-muted);
  font-size: var(--text-sm);
  margin-bottom: var(--space-md);
  text-align: center;
}

.stats-summary-cards {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.stat-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-sm);
  text-align: center;
  box-shadow: var(--shadow-card);
  transition: transform 0.2s, box-shadow 0.2s;
}
.stat-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-card-hover); }

.stat-value { display: block; font-size: var(--text-xl); font-weight: 700; color: var(--accent); }
.stat-label { display: block; font-size: var(--text-xs); color: var(--text-muted); }

.stats-section {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: var(--shadow-card);
}

.stats-section h3 {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-sm);
}

/* Bar chart */
.bar-chart { display: flex; flex-direction: column; gap: var(--space-xs); }

.bar-row {
  display: grid;
  grid-template-columns: 100px 1fr 40px;
  gap: var(--space-sm);
  align-items: center;
  font-size: var(--text-xs);
}

.bar-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--text-secondary); }
.bar-track { height: 16px; background: var(--bg-tertiary); border-radius: var(--radius-full); overflow: hidden; }
.bar-fill { height: 100%; background: var(--accent); border-radius: var(--radius-full); transition: width 0.4s; min-width: 4px; }
.bar-fill-alt { background: var(--formacion); }
.bar-value { text-align: right; font-weight: 600; }

/* Guard stats */
.guard-stats-list { display: flex; flex-direction: column; gap: var(--space-xs); }

.guard-stat-row {
  display: grid;
  grid-template-columns: 80px 1fr 40px;
  gap: var(--space-sm);
  align-items: center;
  font-size: var(--text-xs);
}

.guard-ref { font-weight: 600; }
.guard-progress-bar-container { height: 8px; background: var(--bg-tertiary); border-radius: var(--radius-full); overflow: hidden; }
.guard-fraction { text-align: right; color: var(--text-muted); }

/* ═══════════════════════════════════════════════════
   SETTINGS
   ═══════════════════════════════════════════════════ */
.settings-view { padding: var(--space-md); max-width: 600px; animation: fadeIn 0.3s ease-out; }
.settings-view h2 { font-size: var(--text-lg); margin-bottom: var(--space-lg); }

.settings-section {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-md);
  margin-bottom: var(--space-md);
  box-shadow: var(--shadow-card);
}

.settings-section h3 {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  margin-bottom: var(--space-sm);
  font-weight: 600;
}

.settings-section .btn { margin-top: var(--space-sm); }

.checkbox-label {
  display: flex !important;
  flex-direction: row !important;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--text-sm);
  cursor: pointer;
}

.export-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
}

.file-upload-label {
  cursor: pointer;
}

.settings-danger {
  border-color: rgba(220, 38, 38, 0.3);
}

.settings-section textarea {
  width: 100%;
  padding: var(--space-sm);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-family: var(--font-mono);
  resize: vertical;
  margin-bottom: var(--space-xs);
}

/* ═══════════════════════════════════════════════════
   DIAGNOSTICS
   ═══════════════════════════════════════════════════ */
.diagnostics-view { padding: var(--space-md); max-width: 600px; }
.diagnostics-view h2 { font-size: var(--text-lg); margin-bottom: var(--space-md); }
.diagnostics-view > .btn { margin-right: var(--space-sm); margin-bottom: var(--space-md); }

.diag-results { margin-top: var(--space-md); }

.diag-item {
  display: flex;
  gap: var(--space-sm);
  padding: var(--space-sm);
  border-radius: var(--radius-sm);
  margin-bottom: var(--space-xs);
  font-size: var(--text-sm);
}

.diag-item strong { display: block; }
.diag-item p { font-size: var(--text-xs); color: var(--text-muted); margin: 0; }

.diag-pass { background: rgba(22, 163, 74, 0.08); }
.diag-fail { background: rgba(220, 38, 38, 0.08); }
.diag-icon { font-size: var(--text-lg); line-height: 1; }
.diag-pass .diag-icon { color: var(--success); }
.diag-fail .diag-icon { color: var(--danger); }

.diag-summary {
  padding: var(--space-md);
  border-radius: var(--radius-md);
  font-weight: 600;
  margin-bottom: var(--space-md);
  text-align: center;
}

.diag-summary.diag-pass { background: rgba(22, 163, 74, 0.1); color: var(--success); }
.diag-summary.diag-fail { background: rgba(220, 38, 38, 0.1); color: var(--danger); }

/* ═══════════════════════════════════════════════════
   LOCK SCREEN
   ═══════════════════════════════════════════════════ */
.lock-screen {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  height: 100dvh;
  padding: var(--space-md);
}

.lock-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  text-align: center;
  max-width: 320px;
  width: 100%;
  box-shadow: var(--shadow-xl);
  animation: fadeInScale 0.3s ease-out;
}

.lock-icon { font-size: 3rem; margin-bottom: var(--space-md); }
.lock-card h2 { font-size: var(--text-lg); margin-bottom: var(--space-xs); }
.lock-card p { font-size: var(--text-sm); color: var(--text-muted); margin-bottom: var(--space-md); }

.pin-input-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.pin-input-group input {
  text-align: center;
  font-size: var(--text-xl);
  padding: 12px;
  border: 2px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  letter-spacing: 0.3em;
}

.pin-input-group input:focus {
  border-color: var(--accent);
  outline: none;
}

.error-text { color: var(--danger); font-size: var(--text-sm); margin-top: var(--space-xs); }

/* ═══════════════════════════════════════════════════
   TOAST
   ═══════════════════════════════════════════════════ */
#toast-container {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 800;
  pointer-events: none;
}

.toast {
  background: rgba(17, 24, 39, 0.92);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  color: #fff;
  padding: 12px 24px;
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: 500;
  box-shadow: var(--shadow-xl);
  animation: toastIn 0.35s cubic-bezier(0.2, 0.8, 0.2, 1);
  white-space: nowrap;
  border: 1px solid rgba(255,255,255,0.08);
}

@keyframes toastIn {
  from { opacity: 0; transform: translateY(16px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* ═══════════════════════════════════════════════════
   CUADRANTE GRUPAL
   ═══════════════════════════════════════════════════ */
.cuadrante-view {
  padding: var(--space-sm);
  padding-bottom: var(--space-lg);
  animation: fadeIn 0.3s ease-out;
}

.cuadrante-nav {
  display: flex; align-items: center; justify-content: center; gap: var(--space-md);
  margin-bottom: var(--space-sm);
  padding: var(--space-xs) 0;
}
.cuadrante-title {
  font-size: var(--text-lg); font-weight: 800; color: var(--text-primary);
  letter-spacing: -0.02em;
}

/* Collapsible import actions */
.cuadrante-actions {
  display: none; flex-wrap: wrap; gap: var(--space-xs); justify-content: center;
  margin-bottom: var(--space-sm);
  padding: var(--space-sm);
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  animation: slideDown 0.2s ease-out;
}
.cuadrante-actions.show { display: flex; }
.cq-upload-label { cursor: pointer; }

.cq-toggle-actions {
  display: flex; justify-content: center; margin-bottom: var(--space-sm);
}

.cuadrante-table-wrap {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  animation: fadeInScale 0.35s ease-out;
}

.empty-state {
  text-align: center; padding: var(--space-xl); color: var(--text-muted);
  font-size: var(--text-sm);
}

/* Table */
.cq-table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  font-size: 0.7rem;
  table-layout: fixed;
  background: var(--bg-secondary);
}
.cq-table th, .cq-table td {
  border: 1px solid var(--border-color); text-align: center; padding: 3px 2px;
  white-space: nowrap;
}
.cq-table thead th {
  background: var(--bg-nav);
  color: rgba(255,255,255,0.85);
  font-weight: 700;
  position: sticky;
  top: 0;
  z-index: 3;
}
.cq-name-col {
  width: 48px; position: sticky; left: 0; z-index: 4;
  background: var(--bg-nav);
}
.cq-name-cell {
  width: 48px; position: sticky; left: 0; z-index: 1; background: var(--bg-secondary);
  font-weight: 800; font-size: 0.6rem; text-align: left; padding-left: 4px;
  overflow: hidden; text-overflow: ellipsis;
  border-right: 2px solid var(--border-color);
  letter-spacing: 0.02em;
}
.cq-action-col { width: 28px; }
.cq-action-cell { width: 28px; }
.cq-action-cell .btn { padding: 1px 4px; font-size: 0.6rem; min-width: 0; box-shadow: none; }

.cq-day-header { min-width: 26px; }
.cq-day-header .cq-day-num { display: block; font-weight: 800; font-size: 0.65rem; }
.cq-day-header .cq-day-name { display: block; font-weight: 400; font-size: 0.5rem; opacity: 0.7; }

.cq-cell {
  min-width: 26px; height: 24px; font-weight: 800; font-size: 0.6rem; cursor: default;
  transition: background 0.15s;
}

/* Cuadrante event type colors */
.cq-guardia { background: var(--guardia-bg); color: var(--guardia); }
.cq-plan { background: var(--guardia-plan-bg); color: var(--guardia-plan); }
.cq-libre { background: var(--libre-bg); color: var(--libre); }
.cq-vacaciones { background: var(--vacaciones-bg); color: var(--vacaciones); }
.cq-asunto { background: var(--ap-bg); color: var(--ap); }
.cq-turno-m { background: var(--turno-m-bg); color: var(--turno-m); }
.cq-turno-t { background: var(--turno-t-bg); color: var(--turno-t); }
.cq-turno-n { background: var(--bg-tertiary); color: var(--text-secondary); }
.cq-formacion { background: var(--formacion-bg); color: var(--formacion); }
.cq-juicio { background: var(--juicio-bg); color: var(--juicio); }
.cq-baja { background: var(--baja-bg); color: var(--baja); }

.cq-weekend {
  background: var(--weekend-bg) !important;
  color: var(--weekend-text) !important;
}
.cq-today-col {
  box-shadow: inset 0 0 0 2px var(--today-ring);
  background: var(--accent-light);
}

/* Stats row */
.cq-stats {
  display: flex; gap: var(--space-sm); justify-content: center;
  margin-top: var(--space-md); flex-wrap: wrap;
  animation: slideUp 0.4s ease-out;
}
.cq-stat {
  display: flex; flex-direction: column; align-items: center;
  background: var(--bg-secondary); border-radius: var(--radius-lg);
  padding: var(--space-sm) var(--space-md); min-width: 100px;
  box-shadow: var(--shadow-card);
  border: 1px solid var(--border-color);
  transition: transform 0.2s, box-shadow 0.2s;
}
.cq-stat:hover { transform: translateY(-2px); box-shadow: var(--shadow-card-hover); }
.cq-stat-val { font-size: var(--text-xl); font-weight: 800; color: var(--accent); }
.cq-stat-lbl { font-size: var(--text-xs); color: var(--text-muted); font-weight: 500; }

/* ═══════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════ */
@media (max-width: 480px) {
  .counters-grid { grid-template-columns: repeat(2, 1fr); }
  .stats-summary-cards { grid-template-columns: repeat(2, 1fr); }
  .bar-row { grid-template-columns: 70px 1fr 30px; }
  .ctx-menu { width: calc(100vw - 16px); border-radius: var(--radius-lg); }
  .calendar-title { min-width: auto; font-size: var(--text-base); }
  .year-grid { grid-template-columns: 1fr; }

  /* Cuadrante mobile optimization */
  .cuadrante-view { padding: var(--space-xs); }
  .cuadrante-nav { gap: var(--space-sm); margin-bottom: var(--space-xs); }
  .cuadrante-title { font-size: var(--text-base); }
  .cq-table { font-size: 0.6rem; }
  .cq-name-col, .cq-name-cell { width: 40px; font-size: 0.55rem; }
  .cq-day-header { min-width: 22px; }
  .cq-day-header .cq-day-num { font-size: 0.55rem; }
  .cq-day-header .cq-day-name { font-size: 0.45rem; }
  .cq-cell { min-width: 22px; height: 22px; font-size: 0.55rem; }
  .cq-action-col, .cq-action-cell { width: 22px; }
  .cq-action-cell .btn { padding: 0 2px; font-size: 0.55rem; }
  .cq-stats { gap: var(--space-xs); }
  .cq-stat { min-width: 80px; padding: var(--space-xs) var(--space-sm); }
  .cq-stat-val { font-size: var(--text-lg); }
  .cq-stat-lbl { font-size: 0.6rem; }
}

@media (min-width: 768px) {
  .nav-bar {
    max-width: 500px;
    left: 50%; transform: translateX(-50%);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    box-shadow: 0 -8px 30px rgba(0,0,0,0.15);
  }
  #app { padding: var(--space-md); padding-bottom: 80px; }
  .day { min-height: 64px; }
  .day.compact { min-height: 40px; }
}

@media (min-width: 1024px) {
  .counters-grid { grid-template-columns: repeat(6, 1fr); }
  .stats-summary-cards { grid-template-columns: repeat(4, 1fr); }
}

/* ═══════════════════════════════════════════════════
   PRINT STYLES
   ═══════════════════════════════════════════════════ */
@media print {
  .nav-bar,
  .update-banner,
  #toast-container,
  .ctx-overlay,
  .ctx-menu,
  .modal-overlay,
  .share-popup,
  .quick-actions,
  .btn,
  .registry-filters,
  .stats-period-selector,
  .service-delete {
    display: none !important;
  }

  body {
    background: #fff;
    color: #000;
    font-size: 10pt;
  }

  #app {
    padding: 0;
    max-width: none;
  }

  .calendar-grid { gap: 0; border: 1px solid #999; }
  .day { border: 1px solid #ccc; min-height: 28px; font-size: 8pt; }
  .weekday { background: #eee; color: #000; }
  .day.guardia { background: #ffcdd2 !important; border-left: 4px solid #d32f2f !important; }
  .day.proxima-guardia { background: #ffe0b2 !important; border-left: 4px solid #ef6c00 !important; }
  .day.libre { background: #b2dfdb !important; border-left: 4px solid #00897b !important; }
  .day.vacaciones { background: #b3e5fc !important; border-left: 4px solid #0277bd !important; }
  .day.asunto { background: #e1bee7 !important; border-left: 4px solid #6a1b9a !important; }
  .day.turno-m { background: #fff9c4 !important; border-left: 4px solid #f9a825 !important; }
  .day.turno-t { background: #ffccbc !important; border-left: 4px solid #e65100 !important; }
  .day.formacion { background: #b2ebf2 !important; border-left: 4px solid #00838f !important; }
  .day.juicio { background: #f8bbd0 !important; border-left: 4px solid #c2185b !important; }

  .counter-card { border: 1px solid #ccc; }
  .counter-value { color: #000; }

  .service-card { border: 1px solid #ccc; page-break-inside: avoid; }
  .stats-section { border: 1px solid #ccc; page-break-inside: avoid; }

  .bar-track { background: #eee; }
  .bar-fill { background: #333; }
}
