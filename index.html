<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calendario PWA</title>
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Contenedor del calendario -->
    <div id="year-calendar"></div>

    <!-- Overlay para menús desplegables -->
    <div class="overlay" id="overlay"></div>

    <!-- Botones flotantes para el menú de contadores y configuración -->
    <button class="floating-button right" onclick="toggleCounterMenu()">☰</button>
    <button class="floating-button left" onclick="toggleConfigMenu()">⚙️</button>

    <!-- Menú de contadores -->
    <div class="dropdown-menu-counters" id="counter-menu">
        <span>Libres Acumulados: <span id="counter" class="counter">0</span></span>
        <span>A. Propios Restantes: <span id="asunto-counter" class="counter">8</span></span>
        <span>Vacaciones Restantes: <span id="vacaciones-counter" class="counter">25</span></span>
        <span>Libres Gastados: <span id="libres-gastados" class="counter">0</span></span>
    </div>

    <!-- Menú de configuración -->
    <div class="dropdown-menu-config" id="config-menu">
        <span>Configuración</span>
        <input type="number" id="asuntos-anuales" placeholder="Asuntos Propios Anuales (AP)" value="8">
        <input type="number" id="dias-guardia" placeholder="Días por Guardia (CMPE)" value="5">
        <input type="number" id="dias-vacaciones" placeholder="Vacaciones Anuales (VC)" value="25">
        <input type="number" id="dias-extra" placeholder="Días Extra" value="0">
        <button onclick="saveConfig()">Guardar Configuración</button>
        <button class="reset-button" onclick="resetCounters()">Resetear Contadores</button>
        <button onclick="mostrarRegistro()">Ver Registro de Días Librados</button>
        <button onclick="enviarWhatsAppAlJefe()">Enviar WhatsApp al jefe</button>
        <hr style="margin: 10px 0; border-color: #444;">
        <span>Importar Cuadrante</span>
        <input type="file" id="cuadrante-file" accept=".xlsx,.xls" style="display:none;">
        <button onclick="document.getElementById('cuadrante-file').click()">Seleccionar Excel</button>
        <input type="text" id="nombre-persona" placeholder="Tu nombre en el cuadrante">
        <button id="importar-cuadrante-btn" onclick="importarCuadrante()">Importar Cuadrante</button>
    </div>

    <!-- Popup de Vacaciones -->
<div id="vacation-popup" class="vacation-popup">
    <p>Días de vacaciones a descontar:</p>
    <input id="vacation-days" type="number" readonly>
    <button id="accept-vacation">Aceptar</button>
</div>



    <!-- Div para mostrar el registro de días librados -->
    <div id="registro-librados"></div>

    <!-- Enlazar los archivos JavaScript -->
    <script type="module" src="scripts/utils.js"></script>
    <script type="module" src="scripts/db.js"></script>
    <script type="module" src="scripts/calendar.js"></script>
    <script type="module" src="scripts/cuadranteParser.js"></script>
    <script type="module" src="scripts/events.js"></script>

<button id="reloadButton" title="Forzar recarga"
  style="position: fixed; bottom: 20px; right: 160px;
         padding: 10px 16px; font-size: 16px;
         border: none; border-radius: 6px;
         background-color: #ff9800; color: white;
         box-shadow: 0 4px 8px rgba(0,0,0,0.3);
         z-index: 9999; cursor: pointer;">
  Recargar
</button>
</body>
</html>
