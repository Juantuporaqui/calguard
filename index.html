<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario PWA</title>
    <!-- Enlace al archivo de estilos -->
    <link rel="stylesheet" href="style.css">
    <!-- Enlace al manifiesto -->
    <link rel="manifest" href="/manifest.webmanifest">
    <!-- Script del Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
            .then(function(registration) {
                console.log('Service Worker registrado con éxito:', registration);
            })
            .catch(function(error) {
                console.log('Error al registrar el Service Worker:', error);
            });
        }
    </script>
</head>
<body>
    <div>
        <h2>Guardar Día de Guardia</h2>
        <input type="date" id="fechaGuardia">
        <button id="guardarGuardia">Guardar Día de Guardia</button>
    </div>
    <div>
        <h2>Guardar Día Libre</h2>
        <input type="date" id="fechaLibre">
        <button id="guardarLibre">Guardar Día Libre</button>
    </div>

    <div class="overlay" id="overlay"></div>
    <button class="floating-button right" onclick="toggleCounterMenu()">☰</button>
    <button class="floating-button left" onclick="toggleConfigMenu()">⚙️</button>

    <div id="year-calendar-2024"></div>
    <div id="year-calendar-2025"></div>
    <div id="year-calendar-2026"></div>

    <div id="registro-librados"></div>

    <div class="dropdown-menu-counters" id="counter-menu">
        <span>Libres Acumulados: <span id="counter" class="counter">0</span></span>
        <span>A. Propios Rest: <span id="asunto-counter" class="counter">10</span></span>
        <span>VC. Restantes: <span id="vacaciones-counter" class="counter">30</span></span>
        <span>Libres Gastados: <span id="libres-gastados" class="counter">0</span></span>
    </div>

    <div class="dropdown-menu-config" id="config-menu">
        <span>Configuración</span>
        <input type="number" id="asuntos-anuales" placeholder="Asuntos Propios Anuales (AP)" value="10">
        <input type="number" id="dias-guardia" placeholder="Días por Guardia (CMPE)" value="5">
        <input type="number" id="dias-vacaciones" placeholder="Vacaciones Anuales (VC)" value="30">
        <input type="number" id="dias-extra" placeholder="Días Extra" value="0">
        <button onclick="saveConfig()">Guardar Configuración</button>
        <button class="reset-button" onclick="resetCounters()">Resetear Contadores</button>
        <button onclick="mostrarRegistro()">Ver Registro de Días Librados</button>
        <button onclick="enviarWhatsAppAlJefe()">Enviar WhatsApp al jefe</button>
        <button onclick="crearBackup()">Crear Copia de Seguridad</button>
    </div>

    <div class="vacation-popup" id="vacation-popup">
        <p>Confirma tus vacaciones</p>
        <label for="vacation-days">Días de vacaciones:</label>
        <input type="number" id="vacation-days" value="1">
        <button onclick="confirmVacaciones()">Confirmar</button>
    </div>

    <!-- Enlace a los archivos script.js, calendar.js, ui.js e indexedDB.js -->
    <script src="script.js"></script>
    <script src="calendar.js"></script>
    <script src="ui.js"></script>
    <script src="indexedDB.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            generateYearCalendar(2024);
            obtenerConfiguracionDeIndexedDB();
            obtenerDiasDeIndexedDB();
        });
    </script>
</body>
</html>